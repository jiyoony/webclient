{"version":3,"sources":["components/Movie2.js","components/TodoTemplate.js","components/Search.js","App.js","index.js"],"names":["Movie","movie","handler","img_url","slug","replace","style","flex","height","backgroundPosition","backgroundSize","backgroundRepeat","backgroundImage","onClick","TodoTemplate","children","className","ytsApi","params","axios","get","Object","keys","reduce","prev","key","value","detail","Info","info","id","title","rating","year","runtime","genres","description_full","useState","likeCount","setLikeCount","useEffect","undefined","movie_id","then","data","console","log","padding","display","flexFlow","marginTop","backgroundColor","borderRadius","color","fontWeight","fontSize","join","background","Search","state","isLoading","movies","name","getSearchMovie","search","setState","split","sort_by","count","order_by","limit","error","handleChange","e","target","handleSubmit","preventDefault","this","onSubmit","type","onChange","placeholder","map","index","React","Component","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e746a434.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./Movie.css\";\n\nfunction Movie({ movie, handler }) {\n   const img_url = `http://movie-app-20191313.herokuapp.com/img-yts/assets/images/movies/${movie.slug.replace(\n      /-/gi,\n      \"_\"\n   )}/medium-cover.jpg`;\n\n   return (\n      <div\n         style={{\n            flex: 1,\n            height: 150,\n            backgroundPosition: \"left\",\n            backgroundSize: \"contain\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundImage: `url(${img_url})`\n         }}\n      onClick={() => handler(movie)}\n      />\n   );\n\n}\n\nMovie.propTypes = {\n   movie: PropTypes.any,\n   handler: PropTypes.any,\n};\n\nexport default Movie;","import React from 'react';\nimport './TodoTemplate.scss';\n\nconst TodoTemplate = ({ children }) => {\n  return (\n    <div className=\"TodoTemplate\">\n      <div className=\"app-title\">yts.mx 영화 정보</div>\n      <div className=\"content\">{children}</div>\n    </div>\n  );\n};\n\n\n\n\n\nexport default TodoTemplate;\n","import React, { useEffect, useState } from \"react\";\nimport Movie from './Movie2';\nimport { MdAdd } from 'react-icons/md';\nimport \"./Search.scss\";\n// import Info from './info';\nimport TodoTemplate from './TodoTemplate';\nimport axios from 'axios';\n\nconst ytsApi = {\n  search: (params) =>axios.get('https://movie-app-20191313.herokuapp.com/yts/api/v2/list_movies.json',{\n    params: Object.keys(params).reduce((prev,key)=>{\n      let value=params[key];\n      if(key===\"sort_by\"){\n        switch (value) {\n          case \"like\":\n              value='like_count'\n            break;\n        }\n      }\n      return({...prev,[key]:value})\n    },{})\n  }),\n  detail:(params)=>axios.get('http://movie-app-20191313.herokuapp.com/yts/api/v2/list_movies.json',{\n    params\n  })\n}\n\nconst { detail } = ytsApi\n\nconst Info = (params) => {\n  const { info } = params\n   const { id, title, rating, year, runtime, slug, genres = [], description_full } = info;\n   const img_url = `https://movie-app-20191313.herokuapp.com/img-yts/assets/images/movies/${slug?.replace(\n      /-/gi,\n      \"_\"\n   )}/large-cover.jpg`;\n   const [likeCount, setLikeCount] = useState(0)\n\n   useEffect(() => {\n      if (id !== undefined) {\n         setLikeCount(undefined)\n         detail({ movie_id: id })\n            .then(({ data }) => {\n               console.log('data', data)\n               const { movie } = data?.data\n              //  const { like_count } = movie\n              //  setLikeCount(like_count)\n            })\n      } else {\n         setLikeCount(0)\n      }\n   }, [id, slug])\n\n   return (\n      <div>\n         <div style={{\n            padding: 4,\n            display: 'flex',\n            flex: 1,\n            height: 220,\n            flexFlow: 'column',\n            backgroundPosition: \"center\",\n            backgroundSize: \"cover\",\n            backgroundRepeat: \"no-repeat\",\n            backgroundImage: `url(${img_url})`\n         }}>\n            <div style={{ marginTop: 'auto', padding: 4 }}>\n               <span style={{ backgroundColor: 'red', borderRadius: '4px', color: 'white', fontWeight: 'bold', padding: 4 }}>{year}년 개봉</span>\n            </div>\n            <div style={{ backgroundColor: 'rgba(0, 0, 0, 0.3)', color: 'white', padding: 8, marginTop: 4  }}>\n               <div style={{ fontWeight: 'bold', fontSize: '18px' }}>\n                  {title}\n               </div>\n               <div>\n                  {genres.join(\", \")}\n               </div>\n            </div>\n         </div>\n         <div style={{ background: \"black\", color: 'white', padding: '16px'}}>\n            <div>\n               <div style={{ fontWeight: 'bold', fontSize: '18px' }}>영화 정보</div>\n               <div style={{ display: 'flex' }}>\n                  <span style={{ flex: 1 }}>{runtime}분</span>\n                  <span style={{ flex: 1 }}>평점: {rating}</span>\n                  {likeCount !== undefined && <span style={{ flex: 1 }}>좋아요: {likeCount}</span>}\n               </div>\n            </div>\n            <div style={{ marginTop: '25px' }}>\n               <div style={{ fontWeight: 'bold', fontSize: '18px' }}>\n                  줄거리\n               </div>\n               <div>\n                  {description_full}\n               </div>\n            </div>\n         </div>\n         \n      </div>\n   );\n};\n\nclass Search extends React.Component {\n  state = {\n    isLoading: false,\n    movies: [],\n    value: \"\",\n    name: \"영화 검색\",\n    info: undefined,\n  };\n\n  getSearchMovie = () => {\n    console.log(\"search Movie\");\n    const search = this.state.value;\n\n    try {\n       if (search === \"\") {\n          this.setState({ movies: [], isLoading: false });\n       } else {\n          /*\n        초반에 movies를 초기화 하기보다는 loading 상태값만 둬서 처리해 렌더링 최소화\n        기존과 같은 방식이면 렌더링 여러번 발생.\n      */\n          this.setState({ isLoading: true });\n          // naverMoviesApi.search(search).then(({ data }) => {\n          //    const { items } = data;\n          //    this.setState({ movies: items, isLoading: false });\n          //    console.log(items);\n          // });\n          const [sort_by, count] = search.split(\" \")\n          ytsApi.search({\n             sort_by: sort_by,\n             order_by: 'desc',\n             limit: count\n          }).then(({ data }) => {\n             const { movies } = data.data\n             this.setState({ movies, isLoading: false });\n          })\n          //alert(\"(Loading 메시지 확인중...)\");\n       }\n    } catch (error) {\n       console.log(error);\n    }\n };\n\n  componentDidMount() {\n    this.getSearchMovie();\n  };\n\n  handleChange = (e : any) => {\n    this.setState({value: e.target.value});\n  };\n\n  handleSubmit = (e : any) => {\n    e.preventDefault();\n    this.getSearchMovie();\n   \n  };\n  \n\n  \n  render() {\n    const {movies, isLoading, name,info,value} = this.state;\n    \n    return (<section className=\"container\">\n      {\n        isLoading\n          ? (<div className=\"loader\">\n            <span className=\"loader__text\">({this.state.name}) Loading... {this.state.value}</span>\n          </div>)\n          : (<form onSubmit={this.handleSubmit}>\n            <TodoTemplate>\n              <form className=\"input_div\">\n                <input className=\"input_search\" type=\"text\" value={this.state.value} onChange={this.handleChange} placeholder=\"입력포맷: <정렬기준> <검색개수> 예: like 5\"/>\n                <button type=\"submit\"> <MdAdd /> </button>\n              </form>\n              <div className=\"imgg\">\n              {movies.map((movie,index)=> {\n                  return <Movie key={index} movie={movie} handler={()=>this.setState({info: movie})}/>\n                })}\n                </div>\n                {info && <div className=\"info\">\n                <Info info={info} />\n                  </div>}\n                  </TodoTemplate>\n             </form>)\n          \n            }\n      {/* {info && <div className=\"info\">\n        <Info info={info} />\n      </div>} */}\n      \n    </section>);\n    }\n}\n\nexport default Search;","import React from 'react';\nimport Search from \"./components/Search\" \n\nfunction App(){\n  return (\n  <Search> </Search>\n  // <TodoTemplate>\n  //   <Search/>\n  // </TodoTemplate>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import Search from \"./old_com/Search\" \n// ReactDOM.render(<Search />, document.getElementById('root'));\n\nimport App from './App';\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}